{% extends "_layout.html" %}

{% block title %}
  Homepage
{% endblock %}

{% block header %}
{% endblock %}

{% block content %}
  {% if current_user.is_authenticated %}
    {% if current_user.image_feed %}
    
      
    <div class="container">
      <div class="container-fluid right mt-3 p-0">
        <div class="row">
          <div class="col-sm-2 p-0">
            <img src="{{current_user.profile_image_url}}" class="rounded-circle image-icon" width="70" height="70" alt="">
          </div>
          <div class="col-sm-4">
            <div class="row">
              <p class="mt-2 ml-3 username mb-0"><a href="{{url_for('users.show', username = current_user.username)}}" class="font-weight-bold">{{current_user.username}}</a></p>
              <p class="ml-3">{{current_user.name}}</p>
            </div>
          </div> 
        </div>
        <div class="row mt-3 idol-list">
          <div class="col-sm-12">
            <p class="idol">People who followed you</p>
          {% for fan in current_user.fans %}
            <div class="row m-1 mb-2">
              <img src="{{fan.profile_image_url}}" class="rounded-circle image-icon" width="50" height="50" alt="">
              <p class="mt-2 ml-3 username"><a href="{{url_for('users.show', username = fan.username)}}" class="font-weight-bold">{{fan.username}}</a></p>
            </div>
          {% endfor %}
          </div>
        </div>
      </div>
      <div class="row story-row">
        <div class="col-sm-7 story">
          <div class="row">
            {% for idol in current_user.idols %}
            <div class="col-sm-2 text-center">
              <img src="{{idol.profile_image_url}}" class="rounded-circle image-icon mt-3" width="70" height="70" alt="">
              <p class="username-story"><a href="{{url_for('users.show', username = idol.username)}}" class="font-weight-bold">{{idol.username}}</a></p>
            </div>
          {% endfor %}
            <div>
              <button class="right-button" tabindex="-1"><i class='fas fa-angle-right'></i></button>
            </div>
          </div>
        </div>
      </div>
      {% for image in current_user.image_feed %}
      <div class="row feed">
      
        <div class="col-sm-7 border bg-white user-image">
          <div class="row pl-4 mt-3">
            <img src="{{image.user.profile_image_url}}" class="rounded-circle image-icon" width="50" height="50" alt="">
            <p class="mt-2 ml-3"><a href="{{url_for('users.show', username = image.user.username)}}" class="font-weight-bold">{{image.user.username}}</a></p>
          </div>
          <div class="row">
            <img class="image-feed" src="{{image.new_image_url}}" alt="">
          </div>
          
          <p class="font-weight-bold">{{image.user.username}}</p>
        
          
        </div>
        
      </div>
      {% endfor %}
    </div>
    
    

    
        
      {% else %}
    <div class="text-center text"> 
      <h2>Follow people you know to see their images and videos</h2>
    </div>
      {% endif %}
    {% else %}
    <div class="row justify-content-center mt-4 w-100">
      <div class="col-sm-1">
        <img src="/static/favicon.png" class="w-75 ml-4"  alt="">
      </div>
      <div class="col-sm-2">
        <h3 class="mt-1">Nextagram</h3>
        <p class="slogan">Join us before it is too late.</p>
      </div>
    </div>
    <div id="carouselExampleInterval" class="carousel slide carousel-fade" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active" data-interval="2000">
          <img src="/static/instagram2.PNG" class="d-block w-75 carousel-image m-auto" alt="...">
        </div>
        <div class="carousel-item" data-interval="2000">
          <img src="/static/instagram-profile.png" class="d-block w-50 carousel-image m-auto" alt="...">
        </div>
        <div class="carousel-item" data-interval="2000">
          <img src="/static/instagram1.png" class="d-block w-50 carousel-image m-auto" alt="...">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleInterval" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleInterval" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  {% endif %}
{% endblock %}